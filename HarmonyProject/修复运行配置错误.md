# 修复运行配置错误

## 问题原因

错误信息显示：
```
class path resource [log/logback---spring.profiles.active=dev.xml] cannot be resolved
```

这是因为将 `--spring.profiles.active=dev` 错误地放在了 **"有效配置文件"** 字段中，而不是正确的 **"Program arguments"** 字段中。

Spring Boot 的日志系统会尝试根据这个值加载日志配置文件，导致文件名错误。

## 正确配置步骤（IntelliJ IDEA）

### 步骤1：清空错误的配置

1. 打开运行配置：`Run` → `Edit Configurations...`
2. 找到 **"有效配置文件"** 字段（Active configuration file）
3. **清空这个字段**（删除 `--spring.profiles.active=dev`）

### 步骤2：在正确的位置添加参数

有两种方式，选择其中一种：

#### 方式A：使用 Program arguments（推荐）

1. 在运行配置中找到 **"Program arguments"** 字段
2. 输入：
   ```
   --spring.profiles.active=dev
   ```
3. 点击 `Apply` → `OK`

#### 方式B：使用 VM options

1. 在运行配置中找到 **"VM options"** 字段
2. 输入：
   ```
   -Dspring.profiles.active=dev
   ```
3. 点击 `Apply` → `OK`

### 步骤3：验证配置

配置完成后，运行配置应该如下：

**正确配置：**
- ✅ **Program arguments**: `--spring.profiles.active=dev`
- ✅ **有效配置文件**: （空）
- ✅ **VM options**: （空或只有其他JVM参数）

**错误配置（当前）：**
- ❌ **有效配置文件**: `--spring.profiles.active=dev` ← 这是错误的！

## 详细操作步骤

### 在 IntelliJ IDEA 中：

1. **打开运行配置**
   - 点击右上角的运行配置下拉菜单
   - 选择 `Edit Configurations...`
   - 或右键 `Application.java` → `Run` → `Edit Configurations...`

2. **找到配置字段**
   - 在左侧选择 `Application` 配置
   - 在右侧找到以下字段：
     - **有效配置文件** (Active configuration file)
     - **Program arguments** (程序参数)
     - **VM options** (VM选项)

3. **修正配置**
   - **清空** "有效配置文件" 字段
   - **在** "Program arguments" 字段中输入：`--spring.profiles.active=dev`

4. **保存**
   - 点击 `Apply`
   - 点击 `OK`

5. **重新运行**
   - 点击运行按钮
   - 查看控制台，应该看到：`The following profiles are active: dev`

## 配置位置说明

### 字段说明：

- **有效配置文件** (Active configuration file)
  - ❌ **不要**在这里放 `--spring.profiles.active=dev`
  - 这个字段用于指定额外的配置文件路径，不是用来设置profile的

- **Program arguments** (程序参数)
  - ✅ **正确位置**：在这里输入 `--spring.profiles.active=dev`
  - 这些参数会传递给 `main(String[] args)` 方法

- **VM options** (VM选项)
  - ✅ **也可以**：在这里输入 `-Dspring.profiles.active=dev`
  - 这是JVM系统属性，以 `-D` 开头

## 验证修复

启动应用后，查看控制台输出：

**应该看到：**
```
The following profiles are active: dev
```

**不应该看到：**
```
Logging system failed to initialize...
FileNotFoundException: logback---spring.profiles.active=dev.xml
```

## 如果还有问题

如果修复后还有问题，检查：

1. **确认配置已保存**
   - 重新打开运行配置，确认 "有效配置文件" 是空的
   - 确认 "Program arguments" 中有 `--spring.profiles.active=dev`

2. **检查日志配置文件**
   - 确认 `src/main/resources/log/` 目录下有日志配置文件
   - 通常应该有：`logback-dev.xml`、`logback-prod.xml` 等

3. **尝试清理重建**
   - `Build` → `Rebuild Project`
   - 然后重新运行

## 快速修复清单

- [ ] 打开 `Run` → `Edit Configurations...`
- [ ] 清空 "有效配置文件" 字段
- [ ] 在 "Program arguments" 中输入：`--spring.profiles.active=dev`
- [ ] 点击 `Apply` → `OK`
- [ ] 重新运行应用
- [ ] 确认控制台显示：`The following profiles are active: dev`

