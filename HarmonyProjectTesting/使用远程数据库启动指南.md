# 使用本地后端连接远程数据库 - 启动指南

## 当前配置状态

✅ **远程数据库配置已启用**（在 `application-dev.yml` 中）：
- 数据库地址：`42.193.243.96:13306`
- 数据库名：`bladex`
- 用户名：`proj4user`
- 密码：`fWQ#WcxmpX`

✅ **Redis配置**：
- Redis地址：`42.193.243.96:6379`

## 启动步骤

### 方法1：使用IDE启动（推荐）

1. **打开项目**
   - 使用 IntelliJ IDEA 或 Eclipse 打开 `Bei-Xiang` 项目

2. **配置运行参数**
   - 找到 `Application.java` 文件（`src/main/java/org/springblade/Application.java`）
   - 右键 → Run → Edit Configurations
   - 在 "VM options" 或 "Program arguments" 中添加：
     ```
     --spring.profiles.active=dev
     ```
   - 或者在 "Environment variables" 中添加：
     ```
     SPRING_PROFILES_ACTIVE=dev
     ```

3. **启动应用**
   - 右键 `Application.java` → Run 'Application'
   - 或点击运行按钮

4. **检查启动日志**
   - 查看控制台输出，应该看到：
     ```
     The following profiles are active: dev
     ```
   - 以及数据库连接信息：
     ```
     HikariPool-1 - Starting...
     HikariPool-1 - Start completed.
     ```
   - 最后应该看到：
     ```
     Started Application in X.XXX seconds
     ```

### 方法2：使用Maven命令启动

1. **打开终端/命令行**
   ```bash
   cd Bei-Xiang
   ```

2. **启动应用（指定dev环境）**
   ```bash
   mvn spring-boot:run -Dspring-boot.run.profiles=dev
   ```
   
   或者：
   ```bash
   mvn spring-boot:run -Dspring.profiles.active=dev
   ```

3. **检查启动日志**
   - 查看控制台输出，确认使用dev环境配置

### 方法3：打包后启动

1. **打包应用**
   ```bash
   cd Bei-Xiang
   mvn clean package -DskipTests
   ```

2. **启动应用**
   ```bash
   java -jar target/blade-api.jar --spring.profiles.active=dev
   ```

## 验证配置

### 1. 检查是否使用dev环境

启动后，查看控制台日志，应该看到：
```
The following profiles are active: dev
```

### 2. 检查数据库连接

查看日志中是否有数据库连接信息：
```
HikariPool-1 - Starting...
HikariPool-1 - Start completed.
```

如果看到数据库连接错误，检查：
- 网络是否能访问 `42.193.243.96:13306`
- 数据库用户名密码是否正确
- 防火墙是否阻止连接

### 3. 检查服务是否启动成功

启动成功后，应该看到：
```
Started Application in X.XXX seconds (JVM running for X.XXX)
```

### 4. 测试API接口

在浏览器访问：
```
http://localhost:9999/doc.html
```

如果能看到Swagger API文档页面，说明后端启动成功！

## 常见问题

### Q: 启动时提示找不到数据库？
A: 
1. 确认启动时使用了 `--spring.profiles.active=dev` 参数
2. 检查网络是否能访问远程数据库服务器
3. 查看完整错误日志，确认具体错误信息

### Q: 如何确认使用的是远程数据库而不是本地？
A:
查看启动日志中的数据库连接信息，应该看到：
```
jdbc:mysql://42.193.243.96:13306/bladex
```

### Q: 启动失败，提示端口被占用？
A:
1. 检查9999端口是否被其他程序占用
2. 修改 `application.yml` 中的端口号：
   ```yaml
   server:
     port: 9998  # 改为其他端口
   ```
3. 同时修改前端的BASE_URL配置

### Q: Redis连接失败怎么办？
A:
如果Redis连接失败，可以：
1. 检查网络是否能访问 `42.193.243.96:6379`
2. 或者暂时禁用Redis相关功能（如果应用允许）

## 快速检查清单

启动前确认：
- [ ] 网络可以访问远程数据库服务器
- [ ] 启动时指定了 `--spring.profiles.active=dev`
- [ ] 端口9999未被占用

启动后确认：
- [ ] 控制台显示 "The following profiles are active: dev"
- [ ] 控制台显示 "Started Application"
- [ ] 可以访问 `http://localhost:9999/doc.html`
- [ ] 前端可以正常连接后端

## 下一步

1. ✅ 启动后端服务（使用dev环境）
2. ✅ 确认后端启动成功
3. ✅ 启动前端应用
4. ✅ 测试登录功能
5. ✅ 测试异常订单处理功能

